# EndStone 股票交易插件 (Ups and Downs)

一个基于 EndStone 框架的 Minecraft 股票交易模拟插件，支持实时美股数据交易，内置完整的股票知识教学系统。

体验服务器：IP:arcclub.top，端口：19132，你可以在此服务器体验本插件。

## 📋 系统要求

- **Python**: 3.13+
- **Minecraft 服务器**: 支持 EndStone 框架
- **依赖插件**: arc_core (经济系统)

## 📦 依赖安装

```bash
pip install endstone yfinance
```

## 🚀 安装方法

1. 将插件文件放入服务器的 `plugins` 目录
2. 确保已安装 `arc_core` 经济插件
3. 重启服务器

## ✨ 主要功能

### 🏦 股票交易系统
- **实时数据**: 同步美股市场实时价格
- **多种订单**: 支持市价单和限价单
- **动态手续费**: 可配置的手续费率（默认2%）
- **持仓管理**: 自动计算平均成本和盈亏
- **多线程优化**: 所有网络请求异步处理，不阻塞服务器

### 💰 账户管理
- **资金转入**: 从游戏账户转入股票资金
- **资金转出**: 将股票盈利转回游戏账户
- **余额查询**: 实时查看账户余额和持仓

### 📊 数据展示
- **价格走势**: 查看股票历史价格变化
- **持仓详情**: 显示每只股票的盈亏情况
- **历史订单**: 完整的交易记录

### 🏆 排行榜系统
- **绝对盈亏榜**: 按赚/亏金额排序
- **相对盈亏榜**: 按盈亏百分比排序
- **实时更新**: 动态显示玩家排名

### 📚 教学系统
- **基础知识**: 股票概念、价格决定因素、重要指标
- **交易技巧**: 买卖时机、订单类型、资金管理
- **风险管理**: 风险类型、止损策略、心理控制
- **分页教学**: 循序渐进的学习路径

### ⚙️ 个性化设置
- **配色方案**: 支持红涨绿跌（中国）和绿涨红跌（美国）
- **收藏夹**: 收藏常用股票
- **UI界面**: 现代化的图形界面

## 🎮 使用方法

### 基础命令

```
/stock help                    # 显示帮助信息
/stock ui                      # 打开图形化界面（推荐）
/stock transferin   将资金从服务器经济系统中转入股票账户
/stock transferout  将资金从股票账户中转入服务器经济系统
/stock show <股票代码> [时间范围]   查看股票变化， 时间范围选项: minute (10分钟), day (10天), month (10个月)，默认为day
/stock account  查看我的股票账户余额
/stock buy <股票代码> <股份数> [价格]   购买股票，份数为整数，不填写价格则为市价单，填写价格则为限价单
/stock sell <股票代码> <股份数> [价格]   出售股票，份数为整数，不填写价格则为市价单，填写价格则为限价单
/stock orders [页数]    查看我的历史订单，页数默认为1
/stock shares [页数]    查看我的持仓，页数默认为1

## 📈 支持的股票

- **美股**: AAPL, TSLA, MSFT, GOOGL, AMZN 等
- **加密货币**: BTC-USD, ETH-USD 等
- **其他**: 支持 yfinance 库的所有股票代码

## 🎨 界面功能

### 主面板
- 账户概览
- 盈亏统计
- 快速操作入口

### 持仓管理
- 实时市值计算
- 盈亏百分比显示
- 一键交易操作

### 股票搜索
- 实时价格查询
- 价格走势图表
- 收藏功能

### 排行榜
- 土豪榜（绝对盈亏前5）
- 高手榜（相对盈亏前5）
- 韭菜榜（亏损榜）

## ⚠️ 重要说明

1. **模拟交易**: 本插件为模拟交易，不会产生真实交易
2. **数据延迟**: 价格数据可能有延迟，仅供参考
3. **风险提示**: 投资有风险，请理性交易
4. **网络要求**: 需要稳定的网络连接获取股票数据
5. **教育目的**: 内置教学系统仅供学习参考，不构成投资建议

## 🔧 配置选项

插件支持以下配置（配置文件：`plugins/UpAndDown/stock_setting.yml`）：

- **代理设置**: 支持 HTTP/HTTPS 代理
- **颜色方案**: 可自定义涨跌颜色
- **手续费率**: 可配置的手续费率（默认2%）
- **数据更新间隔**: 股票数据更新频率（默认60秒）

**配置示例**：
```yaml
# 代理设置
proxy=127.0.0.1:5555
enable_proxy=true

# 交易手续费率（百分比，例如：2.0 表示2%）
trading_fee_rate=2.0

# 股票数据更新间隔（秒）
update_interval=60
```

# Road Map
- ✅ 获取股票价格，出售/购买股票
- 🚧 排行榜性能优化
- ⏳ 限价单功能完善
- ⏳ 多语言支持
- ⏳ More...

## 📝 更新日志

### v0.5.0 (最新)
- **🎓 新增完整教学系统**: 包含基础知识、交易技巧、风险管理三大模块
- **⚡ 性能优化**: 所有UI操作改为多线程异步处理，避免服务器卡顿
- **🔧 配置优化**: 手续费率改为可配置选项，支持动态调整
- **📚 教学指引**: `/stock help` 改为UI形式，提供分页式详细教学
- **🎨 UI改进**: 主面板新增"教学指引"按钮，优化用户体验

### v0.4.0
- 新增图形化UI界面
- 优化排行榜显示
- 修复盈亏计算问题
- 支持玩家名字显示

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

本项目采用 MIT 许可证。

---

**免责声明**: 本插件仅供娱乐使用，不构成投资建议。请勿将虚拟货币与真实货币混淆。